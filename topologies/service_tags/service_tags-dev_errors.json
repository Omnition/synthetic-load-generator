{
  "topology" : {
    "services" : [
      {
        "serviceName" : "frontend",
        "tagSets" : [
          {
            "tags" : {
              "version" : "v127",
              "region" : ["us-west-1", "us-east-1"],
              "incident": "dev_errors",
              "environment": "dev",
              "tenant-level": ["bronze", "silver", "gold"],
              "k8s.io/cluster/name": "some-k8s-cluster",
              "k8s.io/namespace/name":  "some-k8s-namespace",
              "k8s.io/pod/name": ["frontend-6b654dbf57-zq8dt", "frontend-d847fdcf5-j6s2f", "frontend-79d8c8d6c8-9sbff"],
              "k8s.io/container/name": "front-end"
            },
            "maxLatency": 100
          }
        ],
        "routes" : [
          {
            "route" : "/checkout",
            "downstreamCalls" : { "checkoutservice" : "/PlaceOrder" },
            "tagSets" : [{"maxLatency": 800}]
          }
        ]
      },
      {
        "serviceName" : "cartservice",
        "tagSets": [
         {
            "tags": {
              "k8s.io/container/name": "cartservice",
              "k8s.io/pod/name": [ "cartservice-6b654dbf57-zq8dt", "cartservice-d847fdcf5-j6s2f" ],
              "version": "v5"
            },
            "maxLatency": 200,
                        "tagGenerators": [
              {
                "multi": {
                  "numTags": 50, "numVals":  200, "valLength": 32
                }
              }
            ],
            "inherit":  ["region", "environment", "tenant-level", "incident", "k8s.io/cluster/name", "k8s.io/namespace/name"]
          }
        ],
        "routes" : [
          {
            "route" : "/GetCart",
            "downstreamCalls" : { },
            "tagSets" : [{"maxLatency": 200}]
          }
        ]
      },
      {
        "serviceName" : "checkoutservice",
        "tagSets": [
         {
            "tags": {
              "k8s.io/container/name": "checkoutservice",
              "k8s.io/pod/name": [ "checkoutservice-6b654dbf57-zq8dt", "checkoutservice-d847fdcf5-j6s2f" ],
              "version": "v37"
            },
            "maxLatency": 500,
                        "tagGenerators": [
              {
                "multi": {
                  "numTags": 50, "numVals":  200, "valLength": 32
                }
              }
            ],
            "inherit":  ["region", "environment", "tenant-level", "incident", "k8s.io/cluster/name", "k8s.io/namespace/name"]
          }
        ],
        "routes" : [
          {
            "route" : "/PlaceOrder",
            "downstreamCalls" : { "paymentservice" : "/CreditCardInfo", "shippingservice" : "/Address", "currencyservice" : "/GetConversion", "cartservice" : "/GetCart", "emailservice" : "/SendOrderConfirmation" }
          }
        ]
      },
      {
        "serviceName" : "paymentservice",
        "tagSets": [
          {
            "tags" : {
              "version" : "v177",
              "error":  true, "http.status_code":  500,
              "k8s.io/pod/name": [ "paymentservice-6b654dbf57-zq8dt", "paymentservice-d847fdcf5-j6s2f" ]
            },
                        "tagGenerators": [
              {
                "multi": {
                  "numTags": 50, "numVals":  200, "valLength": 32
                }
              }
            ],
            "inherit":  ["region", "environment", "tenant-level", "incident", "k8s.io/cluster/name", "k8s.io/namespace/name"]
          }
        ],
        "routes" : [
          {
            "route" : "/ChargeRequest",
            "downstreamCalls": { "paymentservice": "/CreditCardInfo" },
            "tagSets": [
              {
                "tagGenerators": [
                  {
                    "overTime": {
                      "name": "collected_usd",
                      "step": 300,
                      "period": 86400,
                      "jitter": 500,
                      "amplitude": 5000,
                      "offset": 5500
                    }
                  }
                ],
                "maxLatency": 700
              }
            ]
          },
          {
            "route" : "/CreditCardInfo",
            "downstreamCalls" : { },
            "tagSets" : [{"maxLatency": 50}]
          }
        ]
      },
      {
        "serviceName" : "shippingservice",
        "tagSets": [
         {
            "tags": {
              "k8s.io/container/name": "shippingservice",
              "k8s.io/pod/name": [ "shippingservice-6b654dbf57-zq8dt", "shippingservice-d847fdcf5-j6s2f" ],
              "version": "v127"
            },
                        "tagGenerators": [
              {
                "multi": {
                  "numTags": 50, "numVals":  200, "valLength": 32
                }
              }
            ],
            "inherit":  ["region", "environment", "tenant-level", "incident", "k8s.io/cluster/name", "k8s.io/namespace/name"]
          }
        ],
        "routes" : [
          {
            "route" : "/GetQuote",
            "downstreamCalls" : { "shippingservice" : "/Address" },
            "tagSets" : [{"maxLatency": 250}]
          },
          {
            "route" : "/ShipOrder",
            "downstreamCalls" : { "shippingservice" : "/Address"},
            "tagSets" : [{"maxLatency": 500}]
          },
          {
            "route" : "/Address",
            "downstreamCalls" : { },
            "tagSets" : [{"maxLatency": 100}]
          }
        ]
      },
      {
        "serviceName" : "emailservice",
        "tagSets": [
         {
            "tags": {
              "k8s.io/container/name": "emailservice",
              "k8s.io/pod/name": [ "emailservice-6b654dbf57-zq8dt", "emailservice-d847fdcf5-j6s2f" ],
              "version": "v17"
            },
           "tagGenerators": [
             {
               "overTime": {
                 "name": "queue_size",
                 "step": 300,
                 "period": 21600,
                 "jitter": 10,
                 "amplitude": 50,
                 "offset": 60
               }
             }
           ],
                        "tagGenerators": [
              {
                "multi": {
                  "numTags": 50, "numVals":  200, "valLength": 32
                }
              }
            ],
            "inherit":  ["region", "environment", "tenant-level", "incident", "k8s.io/cluster/name", "k8s.io/namespace/name"],
            "maxLatency":  500
          }
        ],
        "routes" : [
          {
            "route" : "/SendOrderConfirmation",
            "downstreamCalls" : { "emailservice" : "/OrderResult" }
          },
          {
            "route" : "/OrderResult",
            "downstreamCalls" : { },
            "tagSets" : [{"maxLatency": 100}]
          }
        ]
      },
      {
        "serviceName" : "currencyservice",
        "tagSets": [
         {
            "tags": {
              "k8s.io/container/name": "currencyservice",
              "k8s.io/pod/name": [ "currencyservice-6b654dbf57-zq8dt", "currencyservice-d847fdcf5-j6s2f" ],
              "version": "v27"
            },
                        "tagGenerators": [
              {
                "multi": {
                  "numTags": 50, "numVals":  200, "valLength": 32
                }
              }
            ],
            "inherit":  ["region", "environment", "tenant-level", "incident"],
            "maxLatency": 100
          }
        ],
        "routes" : [
          {
            "route" : "/GetConversion",
            "downstreamCalls" : { "currencyservice" : "/Money" }
          },
          {
            "route" : "/Money",
            "downstreamCalls" : { }
          }
        ]
      },
      {
        "serviceName" : "adservice",
        "tagSets": [
         {
            "tags": {
              "k8s.io/container/name": "adservice",
              "k8s.io/pod/name": [ "adservice-6b654dbf57-zq8dt", "adservice-d847fdcf5-j6s2f" ],
              "version": "v37"
            },
                        "tagGenerators": [
              {
                "multi": {
                  "numTags": 50, "numVals":  200, "valLength": 32
                }
              }
            ],
            "inherit": ["region", "environment", "tenant-level"],
            "maxLatency": 500
          }
        ],
        "routes" : [
          {
            "route" : "/AdRequest",
            "downstreamCalls" : { }
          },
          {
            "route" : "/Ad",
            "downstreamCalls" : { }
          }
        ]
      }
    ]
  },
  "rootRoutes" : [
    {
      "service" : "frontend",
      "route" : "/checkout",
      "tracesPerHour" : 480
    }
  ]
}
